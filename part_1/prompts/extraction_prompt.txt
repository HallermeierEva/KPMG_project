EXTRACTION_PROMPT = """You are an expert at extracting data from Israeli work injury forms (טופס 283).

CRITICAL INSTRUCTIONS:
1. Extract ALL fields from the OCR text below. Return ONLY valid JSON.
2. PRESERVE ORIGINAL VALUES: Copy values EXACTLY as they appear (e.g., "זכר", "במפעל").
3. ISRAELI ID PRECISION: IDs must be EXACTLY 9 digits. If the OCR shows 8 digits, check if there is a leading '0' or a fragmented digit at the end.
4. CHECKBOX LOGIC (REFINED):
   - Azure OCR often lists labels AFTER the checkbox.
   - If you see ":selected: זכר", the gender is "זכר".
   - If you see "במפעל :selected:", the accidentLocation is "במפעל".
   - Only extract the value physically next to the ":selected:" tag.
   - If a checkbox is marked ':selected:', the text IMMEDIATELY PRECEDING it is the value. Do not guess based on the field header.
If multiple checkboxes exist for 'מקום התאונה' (accidentLocation), prioritize the one where the ':selected:' marker is closest to the label 'במפעל' or 'ת. דרכים'. Do not leave blank if one is clearly selected.
5. MEDICAL SECTION: The Health Fund (קופת חולים) is often marked at the very bottom. If you see 'כללית' or 'מאוחדת' near a checkmark, extract it. Do NOT extract border characters like 'ח' as data.
6. SIGNATURE: The signature is almost always the full name (FirstName + LastName) appearing at the bottom of the first page. Do not return "X".
7. CLEANING: Remove all pipes (|) and spaces from IDs and Dates.
8. MINIMALIST EXTRACTION: Do NOT add characters that are not digits to phone or ID fields. If you see single Hebrew letters like 'ח' or 'ס' near a field, IGNORE them; they are form borders, not data.
9. DATA MINIMALISM: If a field appears empty or only contains a single stray Hebrew character (e.g., 'ח', 'ס'), return an empty string "". Do NOT extract border symbols.

### EXAMPLE OF CHECKBOX EXTRACTION ###
OCR: "מין :unselected: נקבה :selected: זכר" -> gender: "זכר"
OCR: "במפעל :selected: ת. דרכים בעבודה :unselected:" -> accidentLocation: "במפעל"

OCR TEXT TO EXTRACT FROM:
{ocr_text}

REQUIRED OUTPUT SCHEMA:
{{
  "lastName": "",
  "firstName": "",
  "idNumber": "",
  "gender": "",
  "dateOfBirth": {{ "day": "", "month": "", "year": "" }},
  "address": {{ "street": "", "houseNumber": "", "entrance": "", "apartment": "", "city": "", "postalCode": "", "poBox": "" }},
  "landlinePhone": "",
  "mobilePhone": "",
  "jobType": "",
  "dateOfInjury": {{ "day": "", "month": "", "year": "" }},
  "timeOfInjury": "",
  "accidentLocation": "",
  "accidentAddress": "",
  "accidentDescription": "",
  "injuredBodyPart": "",
  "signature": "",
  "formFillingDate": {{ "day": "", "month": "", "year": "" }},
  "formReceiptDateAtClinic": {{ "day": "", "month": "", "year": "" }},
  "medicalInstitutionFields": {{
    "healthFundMember": "",
    "natureOfAccident": "",
    "medicalDiagnoses": ""
  }}
}}
"""